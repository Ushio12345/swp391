<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="UTF-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <title>Đặt sânl</title>
        <!-- link GG font -->
        <link
            href="https://fonts.googleapis.com/css2?family=Pacifico&family=Quicksand:wght@300..700&family=Roboto:ital,wght@0,100;0,300;0,400;0,500;0,700;0,900;1,100;1,300;1,400;1,500;1,700;1,900&display=swap"
            rel="stylesheet"
        />
        <!-- bs5 -->
        <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet" />

        <!-- font awesome -->
        <link
            rel="stylesheet"
            href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.2/css/all.min.css"
            integrity="sha512-SnH5WK+bZxgPHs44uWIX+LLJAJ9/2PkPKZ5QiAj6Ta86w+fsb2TkcmfRyVX3pBnMFcV7oQPJkl9QevSCWr3W6A=="
            crossorigin="anonymous"
            referrerpolicy="no-referrer"
        />

        <!-- tailwind -->
        <link
            rel="stylesheet"
            href="https://cdnjs.cloudflare.com/ajax/libs/tailwindcss/2.2.19/base.css"
            integrity="sha512-z66y0PypNStA/ynlSM3kk1/SDr1n7pIBpQO86uxkHAtBYOJJzXAAFq9rjFz8Egh25cpv3EPcrS4Y8nVHyKB9Dw=="
            crossorigin="anonymous"
            referrerpolicy="no-referrer"
        />
        <script src="https://cdn.tailwindcss.com"></script>
        <link
            href="https://fonts.googleapis.com/css2?family=Pacifico&family=Quicksand:wght@300..700&family=Roboto:ital,wght@0,100;0,300;0,400;0,500;0,700;0,900;1,100;1,300;1,400;1,500;1,700;1,900&display=swap"
            rel="stylesheet"
        />

        <!-- link css -->

        <link rel="stylesheet" href="../css/style.css" />
        <link rel="stylesheet" href="../css/bookingDetail.css" />
    </head>
    <style></style>
    <body>
        <section class="header">
            <div class="">
                <div class="header-top">
                    <div class="logo">
                        <img src="../img/logo-cau-long-dep-01.png" alt="" />
                    </div>
                    <div class="search-name">
                        <input type="text" placeholder="Nhập tên sân cần tìm" id="" />
                        <i class="fa-solid fa-magnifying-glass"></i>
                    </div>
                    <div class="header-top-right">
                        <div class="list-location">
                            <p><i class="fa-solid fa-location-dot"></i> Tìm theo vị trí</p>
                            <div class="location-item">
                                <ul id="location">
                                    <li><a href="">Quận Bình Thạnh</a></li>
                                    <li><a href="">Quận Tân Phú</a></li>
                                    <li><a href="">Quận 7</a></li>
                                    <li><a href="">TP.Thủ Đức</a></li>
                                </ul>
                            </div>
                        </div>
                        <div class="login">
                            <!-- truyền avata và user-name nếu người dùng đã login  -->
                            <!-- nếu chưa login chuyển sang trang login  -->
                            <a href="updateProfile.html" class="user">
                                <!-- truyền avt  -->
                                <img src="../img/download (user).jpg" alt="" />
                            </a>

                            <p class="user-name">Ushio</p>

                            <a href="Guest.html" class="logout">Đăng xuất</a>
                        </div>
                    </div>
                </div>
            </div>
            <div class="header-bot">
                <a href="HomePage.html" class="active">Trang Chủ</a>
                <a href="">Giới Thiệu</a>

                <a href="historyOrder.html">Lịch sử đặt sân</a>
                <a href="">Giới Thiệu</a>
                <a href="">Liên hệ </a>
                <a href="">Quy định</a>
            </div>
        </section>
        <section class="detail-yard">
            <h1 class="text-center" style="font-size: 40px">THÔNG TIN CHI TIẾT</h1>

            <h1 class="">SÂN CẦU LÔNG ABC</h1>
            <div class="detail-yard-title">
                <div class="address">
                    <p>
                        <i class="fa-solid fa-location-dot"></i> Địa chỉ:
                        <span> 123 Phường Tân Nhơn Phú, Quận 9, Thành phố Hồ Chí Minh</span>
                    </p>
                </div>
                <div class="rate">
                    <p>Đánh giá: 4/5 <i class="fa-solid fa-star"></i> (2 / Đánh giá)</p>
                </div>
            </div>
            <div class="detail-yard-info">
                <div class="yard-left col-lg-6">
                    <h3>Thông tin sân</h3>
                    <p>Số sân: <span>5 sân</span></p>
                    <p>Giờ hoạt động: <span>7:00 - 23:00</span></p>
                    <p>Giá tiền/giờ: <span>50.000 - 75.000</span></p>
                    <div class="yard-service row">
                        <h4>Dịch vụ tiện ích</h4>
                        <div class="col-lg-6"><i class="fa-solid fa-wifi"></i> Wifi</div>
                        <div class="col-lg-6"><i class="fa-solid fa-square-parking"></i> Bãi đỗ xe rộng rãi</div>
                        <div class="col-lg-6"><i class="fa-solid fa-mug-saucer"></i> Quán cà phê</div>
                        <div class="col-lg-6"><i class="fa-solid fa-whiskey-glass"></i>Trà đá miễn phí</div>
                    </div>
                </div>

                <div class="yard-right col-lg-6">
                    <img src="../img/4a331c1398d3d7a67ecba739d2e8bb43.jpg" alt="" />
                </div>
            </div>
        </section>
        <section class="form-booking">
            <div class="booking row">
                <div class="nap-gio col-lg-4">
                    <h2 class="text-center">NẠP GIỜ CHƠI</h2>
                    <p class="text-center">(Chỉ dành cho người chơi đăng kí lịch linh hoạt)</p>
                    <div class="input-gio">
                        <label for="inputgio">Nhập giờ: </label>
                        <input type="number" id="inputgio" placeholder="Nhập số giờ muốn nạp" />
                        <p>Giá tiền:</p>
                        <button class="btn btn-success mt-3 w-25">Nạp</button>
                    </div>
                </div>
                <div class="order col-lg-8">
                    <div class="type-booking">
                        <p>Dạng lịch:</p>
                        <button class="single-schedule">Lịch lẻ</button>
                        <button class="fixed-schedule">Cố định</button>

                        <button class="flexible-schedule">Lịch linh hoạt</button>
                    </div>
                    <div class="list-slot-and-time">
                        <div class="calendar-and-yard">
                            <div class="time-line hidden">
                                <i class="fa-solid fa-chevron-left" id="prev-week"></i>
                                <p id="week-display">Từ 23/05/2024 đến 30/05/2024</p>
                                <i class="fa-solid fa-chevron-right" id="next-week"></i>
                            </div>
                            <div class="choice-month hidden">
                                <select name="" id="">
                                    <option value="">Tháng 1</option>
                                    <option value="">Tháng 2</option>
                                    <option value="">Tháng 3</option>
                                    <option value="">Tháng 4</option>
                                    <option value="">Tháng 5</option>
                                    <option value="">Tháng 6</option>
                                    <option value="">Tháng 7</option>
                                    <option value="">Tháng 8</option>
                                    <option value="">Tháng 9</option>
                                    <option value="">Tháng 10</option>
                                    <option value="">Tháng 11</option>
                                    <option value="">Tháng 12</option>
                                </select>
                            </div>
                            <div class="option-yard">
                                <select name="" id="">
                                    <option value="">Sân 1</option>
                                    <option value="">Sân 2</option>
                                    <option value="">Sân 3</option>
                                    <option value="">Sân 4</option>
                                </select>
                            </div>
                        </div>

                        <div class="days-and-slots slot-schedule">
                            <div class="slots-container">
                                <div class="day-row">
                                    <div class="day">
                                        Thứ 2 <br />
                                        <p class="curr-day"></p>
                                    </div>
                                    <div class="slots">
                                        <div class="slot">7:00 - 8:00</div>
                                        <div class="slot">8:00 - 9:00</div>
                                        <div class="slot">9:00 - 10:00</div>
                                        <div class="slot">10:00 - 11:00</div>
                                        <div class="slot">11:00 - 12:00</div>
                                        <div class="slot">14:00 - 15:00</div>
                                        <div class="slot">15:00 - 16:00</div>
                                        <div class="slot">16:00 - 17:00</div>
                                        <div class="slot">17:00 - 18:00</div>
                                        <div class="slot">18:00 - 19:00</div>
                                        <div class="slot">20:00 - 21:00</div>
                                        <div class="slot">22:00 - 23:00</div>
                                    </div>
                                </div>
                                <div class="day-row">
                                    <div class="day">
                                        Thứ 3 <br />
                                        <p class="curr-day"></p>
                                    </div>
                                    <div class="slots">
                                        <div class="slot">7:00 - 8:00</div>
                                        <div class="slot">8:00 - 9:00</div>
                                        <div class="slot">9:00 - 10:00</div>
                                        <div class="slot">10:00 - 11:00</div>
                                        <div class="slot">11:00 - 12:00</div>
                                        <div class="slot">14:00 - 15:00</div>
                                        <div class="slot">15:00 - 16:00</div>
                                        <div class="slot">16:00 - 17:00</div>
                                        <div class="slot">17:00 - 18:00</div>
                                        <div class="slot">18:00 - 19:00</div>
                                        <div class="slot">20:00 - 21:00</div>
                                        <div class="slot">22:00 - 23:00</div>
                                    </div>
                                </div>
                                <div class="day-row">
                                    <div class="day">
                                        Thứ 4 <br />
                                        <p class="curr-day"></p>
                                    </div>
                                    <div class="slots">
                                        <div class="slot">7:00 - 8:00</div>
                                        <div class="slot">8:00 - 9:00</div>
                                        <div class="slot">9:00 - 10:00</div>
                                        <div class="slot">10:00 - 11:00</div>
                                        <div class="slot">11:00 - 12:00</div>
                                        <div class="slot">14:00 - 15:00</div>
                                        <div class="slot">15:00 - 16:00</div>
                                        <div class="slot">16:00 - 17:00</div>
                                        <div class="slot">17:00 - 18:00</div>
                                        <div class="slot">18:00 - 19:00</div>
                                        <div class="slot">20:00 - 21:00</div>
                                        <div class="slot">22:00 - 23:00</div>
                                    </div>
                                </div>
                                <div class="day-row">
                                    <div class="day">
                                        Thứ 5 <br />
                                        <p class="curr-day"></p>
                                    </div>
                                    <div class="slots">
                                        <div class="slot">7:00 - 8:00</div>
                                        <div class="slot">8:00 - 9:00</div>
                                        <div class="slot">9:00 - 10:00</div>
                                        <div class="slot">10:00 - 11:00</div>
                                        <div class="slot">11:00 - 12:00</div>
                                        <div class="slot">14:00 - 15:00</div>
                                        <div class="slot">15:00 - 16:00</div>
                                        <div class="slot">16:00 - 17:00</div>
                                        <div class="slot">17:00 - 18:00</div>
                                        <div class="slot">18:00 - 19:00</div>
                                        <div class="slot">20:00 - 21:00</div>
                                        <div class="slot">22:00 - 23:00</div>
                                    </div>
                                </div>
                                <div class="day-row">
                                    <div class="day">
                                        Thứ 6<br />
                                        <p class="curr-day"></p>
                                    </div>
                                    <div class="slots">
                                        <div class="slot">7:00 - 8:00</div>
                                        <div class="slot">8:00 - 9:00</div>
                                        <div class="slot">9:00 - 10:00</div>
                                        <div class="slot">10:00 - 11:00</div>
                                        <div class="slot">11:00 - 12:00</div>
                                        <div class="slot">14:00 - 15:00</div>
                                        <div class="slot">15:00 - 16:00</div>
                                        <div class="slot">16:00 - 17:00</div>
                                        <div class="slot">17:00 - 18:00</div>
                                        <div class="slot">18:00 - 19:00</div>
                                        <div class="slot">20:00 - 21:00</div>
                                        <div class="slot out-slot">22:00 - 23:00</div>
                                    </div>
                                </div>
                                <div class="day-row">
                                    <div class="day">
                                        Thứ 7<br />
                                        <p class="curr-day"></p>
                                    </div>
                                    <div class="slots">
                                        <div class="slot out-slot">7:00 - 8:00</div>
                                        <div class="slot">8:00 - 9:00</div>
                                        <div class="slot">9:00 - 10:00</div>
                                        <div class="slot">10:00 - 11:00</div>
                                        <div class="slot">11:00 - 12:00</div>
                                        <div class="slot">14:00 - 15:00</div>
                                        <div class="slot">15:00 - 16:00</div>
                                        <div class="slot">16:00 - 17:00</div>
                                        <div class="slot">17:00 - 18:00</div>
                                        <div class="slot">18:00 - 19:00</div>
                                        <div class="slot">20:00 - 21:00</div>
                                        <div class="slot">22:00 - 23:00</div>
                                    </div>
                                </div>
                                <div class="day-row">
                                    <div class="day">
                                        Chủ nhật<br />
                                        <p class="curr-day"></p>
                                    </div>

                                    <div class="slots">
                                        <div class="slot">7:00 - 8:00</div>
                                        <div class="slot">8:00 - 9:00</div>
                                        <div class="slot">9:00 - 10:00</div>
                                        <div class="slot">10:00 - 11:00</div>
                                        <div class="slot">11:00 - 12:00</div>
                                        <div class="slot">14:00 - 15:00</div>
                                        <div class="slot">15:00 - 16:00</div>
                                        <div class="slot">16:00 - 17:00</div>
                                        <div class="slot">17:00 - 18:00</div>
                                        <div class="slot">18:00 - 19:00</div>
                                        <div class="slot">20:00 - 21:00</div>
                                        <div class="slot">22:00 - 23:00</div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <div class="msg-out-of-slot text-danger"></div>
                    <div class="show-slot-selected" style="font-weight: 700"></div>
                    <div class="btn-booking d-flex justify-content-center">
                        <button class="btn btn-success text-center w-25"><a href="BookingDetailV3.html">Đặt ngay</a></button>
                    </div>
                </div>
            </div>
        </section>

        <!-- footer -->
        <section class="footer">
            <div class="container">
                <div class="row">
                    <div class="dinner col-lg-4 col-md-6">
                        <img src="../img/logo-cau-long-dep-01.png" alt="" />
                        <p class="mb-3">
                            Hãy liên hệ với chúng tôi để biết thêm thông tin và đặt sân ngay hôm nay. Chúng tôi rất hân hạnh được đón tiếp bạn!
                        </p>
                        <div class="social-media">
                            <a href="https://www.facebook.com/"><i class="fa-brands fa-facebook-f"></i></a>
                            <a href="https://twitter.com/i/flow/login"><i class="fa-brands fa-twitter"></i></a>
                            <a href="https://www.instagram.com/accounts/login/?hl=en"><i class="fa-brands fa-instagram"></i></a>
                            <a href="https://vn.linkedin.com/"><i class="fa-brands fa-linkedin-in"></i></a>
                        </div>
                    </div>

                    <div class="category col-lg-2 col-md-6 col-sm-6">
                        <h2>Khu vực</h2>
                        <a href="">Bình Thạnh</a><br />
                        <a href="">Tân Phú</a><br />
                        <a href="">Quận 7</a><br />
                        <a href="">TP. Thủ Đức</a>
                    </div>

                    <div class="archieve col-lg-2 col-md-6 col-sm-6">
                        <h2>Liên hệ</h2>
                        <p>
                            <i class="fa-solid fa-phone"></i><br />
                            0123456789
                        </p>
                        <p><i class="fa-solid fa-envelope"></i> forbadbooking@gmail.com</p>
                    </div>

                    <div class="contact col-lg-4 col-md-6">
                        <h2>Đăng kí ngay để cảm nhận</h2>
                        <p class="mb-4">Vui lòng nhập email của bạn <br />chúng tôi sẽ liên hệ trong thời gian sớm nhất</p>
                        <input type="text" placeholder="Email của bạn" />
                        <br />
                        <button>Hoàn tất</button>
                    </div>
                </div>
                <br />
                <hr />
                <br />
                <p>&#169; Tháng 5 2024 - Babminton Court Managerment System Team 4 - SWP391</p>
            </div>
        </section>

        <script>
            document.addEventListener("DOMContentLoaded", () => {
                const selectSlots = document.querySelectorAll(".slot");
                const showSlotSelected = document.querySelector(".show-slot-selected");
                const singleScheduleBtn = document.querySelector(".single-schedule");
                const fixedScheduleBtn = document.querySelector(".fixed-schedule");
                const flexibleScheduleBtn = document.querySelector(".flexible-schedule");
                let alertShown = false;
                let bookingType = "";

                singleScheduleBtn.addEventListener("click", () => {
                    bookingType = "single";
                });

                fixedScheduleBtn.addEventListener("click", () => {
                    bookingType = "fixed";
                });

                flexibleScheduleBtn.addEventListener("click", () => {
                    bookingType = "flexible";
                });

                selectSlots.forEach((slot) => {
                    slot.addEventListener("click", (event) => {
                        const dayRow = slot.closest(".day-row");
                        const selectedSlots = dayRow.querySelectorAll(".slot.selected");

                        if (slot.classList.contains("out-slot")) {
                            alert("Slot bạn chọn đã hết, vui lòng chọn slot khác.");
                            alertShown = true;
                        } else {
                            if (bookingType === "single") {
                                if (slot.classList.contains("selected")) {
                                    slot.classList.remove("selected");
                                } else if (selectedSlots.length === 0 || slot.closest(".day-row") === selectedSlots[0].closest(".day-row")) {
                                    slot.classList.add("selected");
                                } else {
                                    alert("Bạn chỉ có thể chọn nhiều slot trong cùng một thứ.");
                                }
                            } else if (bookingType === "fixed") {
                                const slotIndex = Array.from(dayRow.querySelectorAll(".slot")).indexOf(slot);
                                const allSlots = document.querySelectorAll(`.day-row .slot:nth-child(${slotIndex + 1})`);
                                const isSlotSelected = Array.from(allSlots).some((s) => s.classList.contains("selected"));

                                if (slot.classList.contains("selected")) {
                                    slot.classList.remove("selected");
                                } else if (isSlotSelected) {
                                    slot.classList.add("selected");
                                } else if (selectedSlots.length === 0) {
                                    slot.classList.add("selected");
                                } else {
                                    alert("Bạn chỉ có thể chọn cùng một slot trên các ngày khác nhau.");
                                }
                            } else {
                                if (slot.classList.contains("selected")) {
                                    slot.classList.remove("selected");
                                } else {
                                    slot.classList.add("selected");
                                }
                            }
                        }

                        displaySelectedSlots();
                    });
                });

                function resetSelection() {
                    selectSlots.forEach((slot) => {
                        slot.classList.remove("selected");
                    });
                    displaySelectedSlots();
                }

                function displaySelectedSlots() {
                    const selectedSlots = document.querySelectorAll(".slot.selected");
                    if (selectedSlots.length > 0) {
                        const selectedSlotInfo = Array.from(selectedSlots).map((slot) => slot.textContent.trim());
                        const selectedDays = Array.from(selectedSlots).map((slot) =>
                            slot.closest(".day-row").querySelector(".day").textContent.trim()
                        );
                        let selectedInfoWithDays = "";
                        for (let i = 0; i < selectedSlots.length; i++) {
                            selectedInfoWithDays += `${selectedDays[i]}: ${selectedSlotInfo[i]}`;
                            if (i < selectedSlots.length - 1) {
                                selectedInfoWithDays += ", ";
                            }
                        }
                        showSlotSelected.innerHTML = `Bạn đã chọn: ${selectedInfoWithDays}`;
                    } else {
                        showSlotSelected.innerHTML = "";
                    }
                }
            });

            document.addEventListener("DOMContentLoaded", function () {
                const prevWeekBtn = document.getElementById("prev-week");
                const nextWeekBtn = document.getElementById("next-week");
                const choiceMonth = document.querySelector(".choice-month");
                const timeLine = document.querySelector(".time-line");

                const fixedScheduleBtn = document.querySelector(".fixed-schedule");
                const singleScheduleBtn = document.querySelector(".single-schedule");
                const flexibleScheduleBtn = document.querySelector(".flexible-schedule");

                function updateCalendar(date) {
                    const startOfWeek = getWeekStart(date);
                    updateWeekDisplay(startOfWeek);
                    createDaysColumn();
                    createSlotsGrid();
                }

                prevWeekBtn.addEventListener("click", function () {
                    currentDate.setDate(currentDate.getDate() - 7);
                    updateCalendar(currentDate);
                });

                nextWeekBtn.addEventListener("click", function () {
                    currentDate.setDate(currentDate.getDate() + 7);
                    updateCalendar(currentDate);
                });

                fixedScheduleBtn.addEventListener("click", function () {
                    timeLine.style.display = "none";
                    choiceMonth.classList.remove("hidden");
                    singleScheduleBtn.classList.remove("active");
                    flexibleScheduleBtn.classList.remove("active");
                    fixedScheduleBtn.classList.add("active");
                });

                singleScheduleBtn.addEventListener("click", function () {
                    timeLine.style.display = "flex";
                    choiceMonth.classList.add("hidden");
                    fixedScheduleBtn.classList.remove("active");
                    flexibleScheduleBtn.classList.remove("active");
                    singleScheduleBtn.classList.add("active");
                });
                flexibleScheduleBtn.addEventListener("click", function () {
                    timeLine.classList.remove("hidden");
                    timeLine.style.display = "flex";
                    choiceMonth.classList.add("hidden");
                    fixedScheduleBtn.classList.remove("active");
                    singleScheduleBtn.classList.remove("active");
                    flexibleScheduleBtn.classList.add("active");
                });

                updateCalendar(currentDate);
            });

            document.addEventListener("DOMContentLoaded", () => {
                const prevWeekBtn = document.getElementById("prev-week");
                const nextWeekBtn = document.getElementById("next-week");
                const weekDisplay = document.getElementById("week-display");
                const currDayElements = document.querySelectorAll(".curr-day");
                const selectSlots = document.querySelectorAll(".slot");

                let currentDate = new Date();

                function updateWeekDisplay() {
                    let startOfWeek = currentDate.getDate() - currentDate.getDay() + (currentDate.getDay() === 0 ? -6 : 1);
                    let endOfWeek = startOfWeek + 6;

                    let startDate = new Date(currentDate.setDate(startOfWeek));
                    let endDate = new Date(currentDate.setDate(endOfWeek));

                    let startFormatted = startDate.toLocaleDateString("en-GB", { day: "numeric", month: "numeric" });
                    let endFormatted = endDate.toLocaleDateString("en-GB", { day: "numeric", month: "numeric" });

                    weekDisplay.textContent = `Từ ${startFormatted} đến ${endFormatted}`;

                    currDayElements.forEach((currDayElement) => {
                        currDayElement.textContent = startFormatted;
                    });

                    selectSlots.forEach((slot) => {
                        const slotDate = new Date(startFormatted + "/" + currentDate.getFullYear() + " " + slot.textContent.trim());
                        if (slotDate < new Date()) {
                            slot.classList.add("past-slot");
                            slot.removeEventListener("click", handleSlotClick);
                        } else {
                            slot.classList.remove("past-slot");
                            slot.addEventListener("click", handleSlotClick);
                        }
                    });
                }

                updateWeekDisplay();

                prevWeekBtn.addEventListener("click", () => {
                    currentDate.setDate(currentDate.getDate() - 7);
                    updateWeekDisplay();
                });

                nextWeekBtn.addEventListener("click", () => {
                    currentDate.setDate(currentDate.getDate() + 7);
                    updateWeekDisplay();
                });

                function handleSlotClick() {}
            });
        </script>
        <script src="../js/JS.js"></script>
    </body>
</html>
